{% extends 'base.html' %}

{% block content %}
<div class="mx-auto" style="width: 300px; text-align:center;">
    <h1>Admin Panel</h1>
    <form style="padding: 5px;" action="{{ url_for('bookings.createSlot') }}" method="get">
        <button class="btn btn-success" type="submit" value="Add Booking Slot">Add Booking Slot</button>
    </form>
</div>
<table class="table" style="margin:auto; width:80%">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Date/Time</th>
        <th scope="col">Booked</th>
        <th scope="col">Patient</th>
        <th scope="col">Reason</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
        {% for booking in bookings %}
        <tr>
            <th>{{booking['datetime']}}</th>
            {% if booking['booked'] == 1 %}
                <th>True</th>
                {% for user in users %}
                {% if user['id'] == booking['patient_id'] %}
                <th>{{user['firstname'] + ' ' + user['lastname']}}</th>
                {% endif %}
                {% endfor %}
                <th>{{booking['reason']}}</th>
                <th>
                    <ul id="actions">
                        <li><a href="{{ url_for('bookings.updateAdmin', id=booking['id'])}}">Edit</a>
                        <li><form action="{{ url_for('bookings.deleteSlot', id=booking['id']) }}" method="post">
                                <input class="danger" type="submit" value="Delete" onclick="return confirm('Are you sure?');">
                            </form>
                    </ul>
                </th>
            {% else %}
            <th>False</th>
            <th>N/A</th>
            <th>N/A</th>
            <th>
                <ul id="actions">
                    <li><form action="{{ url_for('bookings.deleteSlot', id=booking['id']) }}" method="post">
                        <input class="danger" type="submit" value="Delete" onclick="return confirm('Are you sure?');">
                        </form>
                </ul>
            </th>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
  </table>
{% endblock %}